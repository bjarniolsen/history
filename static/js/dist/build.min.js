jQuery.noConflict(),jQuery(function(a){Engine={init:function(){var b={};b.startPage="side0",b.numberOfPages=60,b.loader=a('<div class="loader"><div/></div>').appendTo("body"),b.content=a(".site-content"),b.menu=b.content.find(".primary-nav"),b.menuItems=b.menu.find(".primary-nav__link"),b.paginator=b.content.find(".js-paginator"),b.paginator.next=b.paginator.find(".js-paginator__next"),b.paginator.prev=b.paginator.find(".js-paginator__prev");for(var c=0,d=[];c<b.numberOfPages;)pageId="side"+c,imageId=c,d.push(Engine.ui.addPageToDom(pageId,imageId)),c++;b.content.prepend(d),a(window).load(function(){b.loader.hide(),b.content.addClass("do-show-controls"),Engine.ui.bindEvents(b),window.setTimeout(function(){b.content.removeClass("do-show-controls")},1e3)});var e=Engine.cookie.read("playbook");e?(b.url=e.split(",")[0],b.pageNumber=e.split(",")[1]):b.url=b.startPage;var f=a("#"+b.url);f.addClass("is-active"),b.activePageImage=f.find("img:first-child"),Engine.ui.setPageHeight(b,"init"),a(document).bind("load.page",function(a,b){console.log(b.url),b.pageNumber<=b.numberOfPages-1||(b.pageNumber=0,b.url=b.url.replace(/\d+/g,b.pageNumber)),Engine.ui.showPage(b)}),b.menu.on("click",function(){a(this).hasClass("is-active")?Engine.ui.closeMenu(b):Engine.ui.openMenu(b)}),b.paginator.next.on("click",function(){Engine.ui.nextPage(b)}),b.paginator.prev.on("click",function(){Engine.ui.prevPage(b)}),b.menuItems.each(function(c,d){a(d).on("click",function(c){console.log(c),c.preventDefault(),b.url=a(this)[0].pathname.split("/").pop().replace(".html",""),b.pageNumber=b.url.replace(/\D/g,""),Engine.ui.button.disable([b.paginator.next,b.paginator.prev]),a("body").unbind("keyup"),a(document).trigger("load.page",b)})}),window.onresize=function(){Engine.ui.setPageHeight(b,"resize")},console.log(b.url)},ui:{showPage:function(b){console.log("showPage");var c=["animateCurrent","animatePrev"].map(function(a){return a+b.pageDirection}).join(" ");a(".site-content__wrapper").removeClass(c+" is-active is-previous"),a("#"+b.previousPage).addClass("animatePrev"+b.pageDirection+" is-previous"),a("#"+b.url).addClass("animateCurrent"+b.pageDirection+" is-active"),b.previousPage=b.url,Engine.cookie.create("playbook",[b.url,b.pageNumber]),window.setTimeout(function(){a(".site-content__wrapper").removeClass(c),Engine.ui.button.enable([b.paginator.next,b.paginator.prev]),Engine.ui.bindEvents(b)},900)},nextPage:function(b){b.previousPage||(b.previousPage=b.url),b.pageNumber=b.url.replace(/\D/g,""),b.pageNumber++,b.url=b.url.replace(/\d+/g,b.pageNumber),Engine.ui.button.disable([b.paginator.next,b.paginator.prev]),a("body").unbind("keyup"),b.pageDirection="Next",a(document).trigger("load.page",b)},prevPage:function(b){b.previousPage||(b.previousPage=b.url),b.pageNumber>=1&&(b.pageNumber--,b.url=b.url.replace(/\d+/g,b.pageNumber),Engine.ui.button.disable([b.paginator.next,b.paginator.prev]),a("body").unbind("keyup"),b.pageDirection="Prev",a(document).trigger("load.page",b))},addPageToDom:function(a,b){b=2*b;var c='<div class="site-content__wrapper" id="'+a+'">';return c+='<div class="page">',c+='<div class="col">',c+='<div class="image-wrap">',c+='<img src="/static/media/images/Playbook_images'+b+'.jpg" alt=""/>',c+="</div>",c+="</div>",c+='<div class="col">',c+='<div class="image-wrap">',c+='<img src="/static/media/images/Playbook_images'+parseInt(b+1)+'.jpg" alt=""/>',c+="</div>",c+="</div>",c+="</div>"},setPageHeight:function(b,c){"init"===c&&(a.fn.imageLoad=function(b){this.load(b),this.each(function(){this.complete&&0!==this.naturalWidth&&a(this).trigger("load")})},b.activePageImage.imageLoad(function(){b.content.css("height",a(this).height())})),"resize"===c&&b.content.css("height",a("#"+b.url+" img:first-child").height())},openMenu:function(a){a.menu.addClass("is-active"),a.content.addClass("do-show-controls")},closeMenu:function(a){a.menu.removeClass("is-active"),a.content.removeClass("do-show-controls")},button:{disable:function(b){b instanceof Array?a(b).each(function(){a(this).attr("disabled","disabled")}):a(b).attr("disabled","disabled")},enable:function(b){b instanceof Array?a(b).each(function(){a(this).removeAttr("disabled")}):a(b).removeAttr("disabled")}},bindEvents:function(b){a("body").bind("keyup",function(a){a.preventDefault(),38==a.which?Engine.ui.prevPage(b):40==a.which?Engine.ui.nextPage(b):37==a.which?Engine.ui.openMenu(b):(27==a.which||39==a.which)&&Engine.ui.closeMenu(b)})}},cookie:{create:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"},read:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},erase:function(a){cookie.create(a,"",-1)}}},Engine.init()}),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();