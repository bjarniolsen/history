jQuery.noConflict(),jQuery(function(a){Engine={init:function(){var b={};b._PAGEDIR_="/sider/",b.url="side0",b.pageNumber=0,b.root=a(".site-wrapper"),b.menu=b.root.find(".primary-nav"),b.menuItems=b.menu.find(".primary-nav__link"),b.content=b.root.find(".site-content"),b.content.css("height",a(".dummy img").height()),b.paginator=b.root.find(".js-paginator"),b.paginator.next=b.paginator.find(".js-paginator__next"),b.paginator.prev=b.paginator.find(".js-paginator__prev"),a(document).bind("load.page",function(b,c){a("#"+c.url).length?Engine.ui.showPage(c):Engine.ui.getPage(c)}),b.menu.on("click",function(){a(this).hasClass("is-active")?a(this).removeClass("is-active"):a(this).addClass("is-active")}),b.paginator.next.on("click",function(){b.pageturner="next",b.pageNumber=b.url.match(/\d/g),b.pageNumber++,b.url=b.url.replace(/\d/g,b.pageNumber),Engine.ui.button.disable(a(this)),a(document).trigger("load.page",b)}),b.paginator.prev.on("click",function(){b.pageturner="prev",b.pageNumber=b.url.match(/\d/g),b.pageNumber>=1?(b.pageNumber--,b.url=b.url.replace(/\d/g,b.pageNumber),Engine.ui.button.disable(a(this)),a(document).trigger("load.page",b)):Engine.ui.button.disable(a(this))}),b.menuItems.each(function(c,d){a(d).on("click",function(c){c.preventDefault(),b.url=a(this)[0].pathname.split("/").pop().replace(".html",""),a(document).trigger("load.page",b)})});var c=Engine.cookie.read("playbook");c&&(b.url=c.split(",")[0],b.pageNumber=c.split(",")[1]),window.setTimeout(function(){c&&a(".dummy").addClass("animatePrev"),a(document).trigger("load.page",b)},900)},ui:{showPage:function(b){a(".site-content__wrapper").hide().removeClass("animateCurrent animatePrev"),a("#"+b.previousPage).show().css("z-index",2).addClass("animatePrev"),a("#"+b.url).show().css("z-index",3).addClass("animateCurrent"),b.previousPage=b.url,window.setTimeout(function(){a(".site-content__wrapper").removeClass("animateCurrent animatePrev"),Engine.ui.button.enable([b.paginator.next,b.paginator.prev])},900)},getPage:function(b){b.previousPage&&(a(".site-content__wrapper").hide().removeClass("animateCurrent animatePrev"),a("#"+b.previousPage).show().css("z-index",2).addClass("animatePrev"));var c=b._PAGEDIR_+b.url+".html";a.get(c).done(function(c){var d=Engine.ui.addPageToDom(b,c);d.addClass("animateCurrent"),b.content.prepend(d),d="",b.previousPage=b.url,window.setTimeout(function(){a(".site-content__wrapper").removeClass("animateCurrent animatePrev"),Engine.ui.button.enable([b.paginator.next,b.paginator.prev])},1e3),Engine.cookie.create("playbook",[b.url,b.pageNumber],2)}).fail(function(){console.log("last page"),b.pageNumber=0,b.url=b.url.replace(/\d/g,b.pageNumber),Engine.ui.button.disable(b.paginator.next),a(document).trigger("load.page",b)})},addPageToDom:function(b,c){return a('<div class="site-content__wrapper" id="'+b.url+'">'+c+"</div>")},button:{disable:function(b){b instanceof Array?a(b).each(function(){a(this).attr("disabled","disabled")}):a(b).attr("disabled","disabled")},enable:function(b){b instanceof Array?a(b).each(function(){a(this).removeAttr("disabled")}):a(b).removeAttr("disabled")}},preload:function(b){b.pageNumber=b.url.match(/\d/g),b.pageNumber++,b.url=b.url.replace(/\d/g,b.pageNumber);var c=b._PAGEDIR_+b.url+".html";a.get(c).done(function(a){console.log("page: ",b.url," preloaded");var c=Engine.ui.addPageToDom(b,a);b.content.prepend(c),c=""}).fail(function(){console.log("preload failed")})}},cookie:{create:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"},read:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},erase:function(a){cookie.create(a,"",-1)}}},Engine.init()}),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();